name: ğŸ“º Otomatik M3U GÃ¼ncelleme

on:
  schedule:
     - cron: '0 */6 * * *'
  workflow_dispatch:      # Elle tetikleme desteÄŸi

jobs:
  generate:
    runs-on: ubuntu-latest

    steps:
      - name: ğŸ“¥ Repo'yu klonla
        uses: actions/checkout@v3

      - name: ğŸ Python kur
        uses: actions/setup-python@v4
        with:
          python-version: '3.11'

      - name: ğŸ“¦ Gerekli modÃ¼lleri kur
        run: |
          python -m pip install --upgrade pip
          pip install pyyaml requests

      - name: â–¶ï¸ M3U dosyasÄ±nÄ± Ã¼ret
        run: |
          python generate_playlist.py

      - name: ğŸ“¤ DeÄŸiÅŸiklikleri push et
        run: |
          git config user.name "GitHub Action"
          git config user.email "action@github.com"
          git add stream/all_channels.m3u
          git commit -m "ğŸ§ Otomatik gÃ¼ncellenmiÅŸ M3U playlist" || echo "DeÄŸiÅŸiklik yok"
          git push



